<?xml version="1.0" encoding="UTF-8"?>
<View xmlns="http://www.butent.com/view"
      xmlns:x="http://www.butent.com/expression"

  name="TradeActServices" source="TradeActServices" module="Trade.Acts"
  caption="=tradeActServices"
  >
  <Columns>
    <SimpleColumn name="TradeAct" />
    <SimpleJoin name="TradeAct" joinType="LEFT">
      <SimpleColumn name="ContinuousAct" />
      <SimpleColumn name="RentProject" />
      <SimpleColumn name="Date" />
      <SimpleColumn name="Until" />

      <SimpleJoin joinType="LEFT" name="Series">
        <SimpleColumn name="SeriesName" alias="TradeSeriesName" />
      </SimpleJoin>
      <SimpleColumn name="Number" alias="TradeNumber" />
      <SimpleColumn name="Object" />
    </SimpleJoin>

    <SimpleColumn name="RelRentAct" >
      <x:nvl type="LONG">
        <x:number>"RentProject"</x:number>
        <x:number>"TradeAct"</x:number>
      </x:nvl>
    </SimpleColumn>

    <SimpleColumn name="Item" />
    <SimpleJoin joinType="INNER" name="Item">
      <SimpleColumn name="Name" alias="ItemName" />
      <SimpleColumn name="Article" />

      <SimpleJoin joinType="INNER" name="Unit">
        <SimpleColumn name="Name" alias="UnitName" />
      </SimpleJoin>
      <SimpleColumn name="TimeUnit" />

      <SimpleColumn name="IsService" />

      <SimpleColumn name="Vat" alias="ItemVat" />
      <SimpleColumn name="VatPercent" alias="ItemVatPercent" />
      <SimpleColumn name="Ordinal" alias="ItemOrdinal" />
    </SimpleJoin>

    <SimpleColumn name="DateFrom" />
    <SimpleColumn name="DateTo" />

    <SimpleColumn name="Tariff" />
    <SimpleColumn name="Factor" />

    <SimpleColumn name="DaysPerWeek" />
    <SimpleColumn name="MinTerm" />

    <SimpleColumn name="Quantity" />
    <SimpleColumn name="Price" />

    <SimpleColumn name="IsRentalPrice" />
    <SimpleColumn name="IsApplyTariff" />

    <SimpleColumn name="VatPlus" />
    <SimpleColumn name="Vat" />
    <SimpleColumn name="VatPercent" />

    <SimpleColumn name="Discount" />

    <SimpleColumn name="Supplier" />
    <SimpleJoin joinType="LEFT" name="Supplier">
      <SimpleColumn name="Name" alias="SupplierName" />
    </SimpleJoin>
    <SimpleColumn name="CostAmount" />
    <SimpleColumn name="ItemValue" />

    <SimpleColumn name="Note" />

    <SimpleColumn name="ServiceObject" />
    <SimpleJoin name="ServiceObject" joinType="LEFT">
      <SimpleColumn name="Model" />
      <SimpleColumn name="Address" />
    </SimpleJoin>

    <SimpleColumn name="Run" />

    <ExternalJoin name="TradeActService" joinType="LEFT" source="TradeActInvoices">
      <SimpleJoin name="SaleItem" joinType="LEFT">
        <AggregateColumn name="Factor" aggregate="SUM" alias="ServiceInvoiceRange" label="=ordCompleted"></AggregateColumn>
      </SimpleJoin>
    </ExternalJoin>

  </Columns>
  <Order>
    <OrderBy column="ItemOrdinal"/>
  </Order>
</View>

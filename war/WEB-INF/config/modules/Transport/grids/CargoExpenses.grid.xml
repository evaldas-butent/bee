<?xml version="1.0" encoding="UTF-8"?>
<g:Grid xmlns="http://www.butent.com/column" xmlns:g="http://www.butent.com/grid"
  xmlns:ui="http://www.butent.com/ui"

  name="CargoExpenses" viewName="CargoExpenses"
  flexGrow="1"
  newRowCaption="=trNewCargoExpense"
  >
  <g:columns>
    <DataColumn name="Date" />

    <RelColumn name="Service" />
    <DataColumn name="Amount" format="0.00" />
    <RelColumn name="Currency" flexGrow="0" />
    <DataColumn name="VatPlus" width="20" sortable="false" horizontalAlignment="center" caption="+">
      <render><ui:expression>row.VatPlus ? '+' : ''</ui:expression></render>
    </DataColumn>
    <DataColumn name="Vat">
      <editor type="number" percentageTag="VatPercent" />
    </DataColumn>
    <DataColumn name="VatPercent" width="20" sortable="false" horizontalAlignment="center" caption="%">
      <render><ui:expression>row.VatPercent ? '%' : ''</ui:expression></render>
    </DataColumn>
    <CalcColumn name="Total" type="decimal" caption="=total" format="0.00">
      <style>
        <bodyStyle><ui:font>bold</ui:font></bodyStyle>
      </style>
      <renderer type="total" />
    </CalcColumn>

    <RelColumn name="Supplier" renderColumns="SupplierName SupplierTypeName"
               choiceColumns="Name TypeName" required="true" />
    <DataColumn name="Number" />
    <DataColumn name="Note" />

    <RelColumn name="Purchase" caption="=trdPurchaseId" readOnly="true" cellType="html"
               editEnabled="true" editForm="CargoPurchaseInvoice"
               editViewName="CargoPurchaseInvoices">
      <render>
        <ui:expression>row.PurchaseDate ? (row.PurchaseDate.toISOString().substring(0, 10)
          + " &lt;strong&gt;" + (row.PurchasePrefix ? row.PurchasePrefix : " ") + row.PurchaseNo + "&lt;/strong&gt;")
          : ""
        </ui:expression>
      </render>
    </RelColumn>
    <RelColumn name="Income" newRowEnabled="false" choiceColumns="ID Date ServiceName Amount CurrencyName" />
  </g:columns>

  <g:rowEditable>
    <ui:expression>!row.Purchase</ui:expression>
  </g:rowEditable>
</g:Grid>
